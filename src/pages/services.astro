---
import Layout from '../layouts/Layout.astro';
import heroBgSrc from '../assets/services-hero-bg.jpg'
import piscineImg from '../assets/riad-home-hero.png'
import hammamImg from '../assets/hammam.jpg'
import restaurantImg from '../assets/restaurant.jpg'

const services = [
  {
    id: 'piscine',
    title: 'Piscine',
    description: 'Profitez de notre piscine traditionnelle au cœur du patio pour vous rafraîchir après une journée d\'exploration',
    longDescription: 'Notre piscine au cœur du patio intérieur est l\'âme du Riad. Entourée de colonnes traditionnelles, elle vous offre un havre de fraîcheur après vos explorations urbaines. Les transats et parasols vous invitent à la détente, tandis que le service de boissons est disponible tout au long de la journée.',
    image: piscineImg.src
  },
  {
    id: 'hammam',
    title: 'Hammam & Spa',
    description: 'Découvrez les rituels de bien-être traditionnels marocains dans notre hammam authentique',
    longDescription: 'Notre hammam traditionnel vous invite à découvrir les rituels ancestraux de purification et de relaxation. Nos thérapeutes expérimentés proposent une gamme complète de soins utilisant des produits naturels locaux comme l\'huile d\'argan et le savon noir.',
    image: hammamImg.src
  },
  {
    id: 'restaurant',
    title: 'Restaurant',
    description: 'Savourez une cuisine marocaine raffinée, préparée avec des produits frais et locaux',
    longDescription: 'Notre restaurant propose une cuisine marocaine authentique et raffinée, élaborée par notre chef à partir de produits frais du marché. Dégustez nos spécialités dans le patio, sur la terrasse panoramique ou dans l\'intimité de votre chambre.',
    image: restaurantImg.src
  }
];

const faqs = [
  {
    question: "Quels sont les horaires du spa et du hammam ?",
    answer: "Le spa et le hammam sont ouverts tous les jours de 10h à 20h. Les soins se font sur réservation, idéalement 24h à l'avance pour garantir votre créneau préféré."
  },
  {
    question: "Le petit-déjeuner est-il inclus dans le prix de la chambre ?",
    answer: "Oui, toutes nos chambres incluent un petit-déjeuner marocain traditionnel servi de 08h00 à 10h00, au choix dans le patio, sur la terrasse ou dans votre chambre."
  },
  {
    question: "Proposez-vous des transferts aéroport ?",
    answer: "Oui, nous organisons des transferts privés depuis et vers l'aéroport de Marrakech. Le service est disponible 24h/24 sur réservation préalable."
  },
  {
    question: "Quels types d'excursions proposez-vous ?",
    answer: "Nous proposons une variété d'excursions : visites guidées de la médina, excursions dans l'Atlas, journée à Essaouira, escapade dans le désert d'Agafay, et bien d'autres. Chaque excursion peut être personnalisée selon vos souhaits."
  },
  {
    question: "Les repas sont-ils servis toute la journée ?",
    answer: "Notre restaurant est ouvert de 12h à 22h30. En dehors de ces horaires, un service de snacking léger est disponible 24h/24."
  },
  {
    question: "Peut-on réserver des soins spa à l'avance ?",
    answer: "Oui, nous recommandons de réserver vos soins spa au moment de votre réservation de chambre pour garantir la disponibilité. Vous pouvez également réserver pendant votre séjour selon les disponibilités."
  }
];
---

<Layout 
  title="Nos Services" 
  description="Explorez les services du Riad Maison du Trésor à Marrakech : piscine, hammam, excursions et soins bien-être pour un séjour inoubliable."
>
  <!-- Hero section -->
  <section class="relative pt-32 pb-16 md:pt-40 md:pb-24 bg-black text-white">
    <div class="absolute inset-0 z-0">
      <img 
        src={heroBgSrc.src}
        alt="Téléphone vintage marocain" 
        class="w-full h-full object-cover opacity-40"
        loading="lazy"
      />
    </div>
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
      <div class="max-w-3xl">
        <h1 class="text-4xl md:text-5xl font-serif mb-4">Services</h1>
        <p class="text-xl">Profitez d’une expérience unique au coeur de Marrakech : petit déjeuner traditionnel, dîner privé au coucher du soleil, hammam relaxant, piscine rafraîchissante et bien plus encore…</p>
      </div>
    </div>
  </section>

  <!-- Services section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="space-y-24">
        {services.map((service, index) => (
          <div id={service.id} class="flex flex-col lg:flex-row gap-12 items-center scroll-mt-24">
            <div class={`lg:w-1/2 ${index % 2 === 1 ? 'lg:order-2' : ''}`}>
              <img 
                src={service.image} 
                alt={service.title} 
                class="w-full h-[400px] object-cover rounded-lg shadow-luxury"
                 loading="lazy"
              />
            </div>
            <div class={`lg:w-1/2 ${index % 2 === 1 ? 'lg:order-1' : ''}`}>
              <h2 class="text-3xl font-semibold font-serif mb-4">{service.title}</h2>
              <p class="text-gray-600 mb-6">{service.longDescription}</p>
              <a href="/contact" class="btn btn-primary">
                En savoir plus
              </a>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- FAQ section -->
  <section class="py-16 bg-cream-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl mx-auto">
        <h2 class="text-3xl font-serif mb-6 text-center">Questions fréquentes</h2>
        <p class="text-center mb-12 text-gray-700">
          Nous avons rassemblé les questions les plus courantes concernant nos services.
        </p>
        
        <div class="space-y-6">
          {faqs.map((faq, index) => (
            <div class="bg-white rounded-lg shadow-md overflow-hidden">
              <button class="faq-toggle w-full text-left px-6 py-4 focus:outline-none" data-index={index}>
                <div class="flex justify-between items-center">
                  <h3 class="font-medium text-lg">{faq.question}</h3>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform transition-transform" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </div>
              </button>
              <div class="faq-content px-6 pb-4 hidden">
                <p class="text-gray-700">{faq.answer}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- CTA section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-3xl font-serif mb-4">Besoin d'informations supplémentaires ?</h2>
        <p class="text-lg mb-8">Notre équipe est à votre disposition pour répondre à toutes vos questions et vous aider à organiser votre séjour.</p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <a href="/contact" class="btn btn-primary">
            Nous contacter
          </a>
          <a href="/reservation" class="btn btn-outline">
            Réserver maintenant
          </a>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  .fade-in-up {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }
  
  .fade-in-up.visible {
    opacity: 1;
    transform: translateY(0);
  }

  html {
    scroll-behavior: smooth;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const animatedElements = document.querySelectorAll('.fade-in-up');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });
    
    animatedElements.forEach(el => {
      observer.observe(el);
    });

    // FAQ accordéon
    const faqToggles = document.querySelectorAll('.faq-toggle');
    
    faqToggles.forEach(toggle => {
      toggle.addEventListener('click', () => {
        const content = toggle.nextElementSibling;
        const arrow = toggle.querySelector('svg');
        
        // Fermer tous les autres éléments
        document.querySelectorAll('.faq-content').forEach(item => {
          if (item !== content) {
            item.classList.add('hidden');
          }
        });
        
        document.querySelectorAll('.faq-toggle svg').forEach(item => {
          if (item !== arrow) {
            item.classList.remove('rotate-180');
          }
        });
        
        // Basculer l'élément actuel
        content.classList.toggle('hidden');
        arrow.classList.toggle('rotate-180');
      });
    });
  });
</script>