---
import Layout from '../layouts/Layout.astro';
import ContactForm from '../components/ui/ContactForm.astro';
import imgSrc from '../assets/home-page-cta.jpg'
import {contactInfo} from '../constants'


const faqs = [
  {
    question: 'Quelle est l\'heure d\'arrivée et de départ ?',
    answer: 'L\'heure d\'arrivée (check-in) est à partir de 14h00, et l\'heure de départ (check-out) est jusqu\'à 12h00. Des arrangements spéciaux peuvent être faits sur demande, selon disponibilité.'
  },
  {
    question: 'Le petit-déjeuner est-il inclus dans le prix de la chambre ?',
    answer: 'Oui, toutes nos chambres incluent un petit-déjeuner marocain traditionnel servi de 08h00 à 10h00 sur la terrasse ou dans le patio, selon votre préférence.'
  },
  {
    question: 'Comment se rendre au Riad depuis l\'aéroport ?',
    answer: 'Nous proposons un service de transfert depuis l\'aéroport de Marrakech. Vous pouvez également prendre un taxi, mais nous recommandons notre service de transfert car le Riad se trouve dans la médina où les taxis ne peuvent pas entrer.'
  },
  {
    question: 'Y a-t-il un restaurant dans le Riad ?',
    answer: 'Oui, notre Riad dispose d\'un restaurant qui sert des plats traditionnels marocains. Les repas peuvent être servis dans le patio, sur la terrasse ou dans votre chambre. Il est conseillé de réserver vos dîners à l\'avance.'
  },
  {
    question: 'Le Riad propose-t-il des excursions ?',
    answer: 'Oui, notre service de conciergerie peut organiser diverses excursions à Marrakech et dans ses environs. Nous proposons des visites guidées de la médina, des excursions d\'une journée dans l\'Atlas, à Essaouira ou dans le désert d\'Agafay.'
  },
  {
    question: 'Y a-t-il le Wi-Fi dans les chambres ?',
    answer: 'Oui, le Wi-Fi gratuit est disponible dans tout le Riad, y compris dans les chambres, les espaces communs et la terrasse.'
  }
];
---

<Layout 
  title="Contact" 
  description="Contactez le Riad Maison du Trésor à Marrakech pour toute question, réservation ou demande spéciale. Nous sommes à votre écoute."
>
  <!-- Hero section -->
  <section class="relative pt-32 pb-16 md:pt-40 md:pb-24 bg-black text-white">
    <div class="absolute inset-0 z-0">
      <img 
        src={imgSrc.src}
        alt="Téléphone vintage marocain" 
        class="w-full h-full object-cover opacity-50"
      />
    </div>
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
      <div class="max-w-3xl">
        <h1 class="text-4xl md:text-5xl font-serif mb-4">Contact</h1>
        <p class="text-xl">Nous sommes à votre disposition pour répondre à toutes vos questions et vous aider à planifier votre séjour.</p>
      </div>
    </div>
  </section>
  
  <!-- Contact info and form -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        <!-- Contact form -->
        <div class="order-2 lg:order-1 fade-in-up">
          <h2 class="text-3xl font-serif mb-6">Envoyez-nous un message</h2>
          <p class="mb-8 text-gray-700">
            Vous avez des questions sur nos chambres, nos services ou vous souhaitez réserver ? Utilisez ce formulaire pour nous contacter, nous vous répondrons dans les plus brefs délais.
          </p>
          
          <ContactForm />
        </div>
        
        <!-- Contact info -->
        <div class="order-1 lg:order-2 fade-in-up">
          <h2 class="text-3xl font-serif mb-6">Informations de contact</h2>
          <p class="mb-8 text-gray-700">
            N'hésitez pas à nous contacter par téléphone ou email, ou à venir nous rendre visite. Notre équipe multilingue est disponible pour vous répondre.
          </p>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
            {contactInfo.map(item => (
              <div class="flex">
                <div class="flex-shrink-0 mr-4 bg-terracotta-100 text-terracotta-600 rounded-full p-3 self-start">
                  {item.icon === 'location' && (
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                  )}
                  {item.icon === 'phone' && (
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                    </svg>
                  )}
                  {item.icon === 'email' && (
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                  )}
                  {item.icon === 'clock' && (
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  )}
                </div>
                <div>
                  <h3 class="font-medium text-lg mb-1">{item.title}</h3>
                  <p class="text-gray-700 mb-2">{item.content}</p>
                  {item.link && (
                    <a href={item.link} class="text-terracotta-500 hover:text-terracotta-600 inline-flex items-center">
                      {item.linkText}
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                      </svg>
                    </a>
                  )}
                </div>
              </div>
            ))}
          </div>
          
          <!-- Map -->
          <div class="rounded-lg overflow-hidden shadow-md h-80 fade-in-up">
            <iframe
              width="100%"
              height="100%"
              frameborder="0"
              scrolling="no"
              marginheight="0"
              marginwidth="0"
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2977.149582763134!2d-7.985832799999999!3d31.622866300000002!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xdafef3bd99a896b%3A0xd5562f93e05cd8bf!2sMaison%20Du%20Tresor%20marrakech!5e1!3m2!1sfr!2sma!4v1748169457530!5m2!1sfr!2sma"
              style="border:0;"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
            ></iframe>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- FAQ section -->
  <section id="faq" class="py-16 bg-sable-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl mx-auto">
        <h2 class="text-3xl font-serif mb-6 text-center">Questions fréquentes</h2>
        <p class="text-center mb-12 text-gray-700">
          Nous avons rassemblé les questions les plus courantes pour vous aider à préparer votre séjour.
        </p>
        
        <div class="space-y-6">
          {faqs.map((faq, index) => (
            <div class="bg-white rounded-lg shadow-md overflow-hidden fade-in-up">
              <button class="faq-toggle w-full text-left px-6 py-4 focus:outline-none" data-index={index}>
                <div class="flex justify-between items-center">
                  <h3 class="font-medium text-lg">{faq.question}</h3>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform transition-transform" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </div>
              </button>
              <div class="faq-content px-6 pb-4 hidden">
                <p class="text-gray-700">{faq.answer}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>
  
  <!-- CTA section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl mx-auto text-center fade-in-up">
        <h2 class="text-3xl font-serif mb-4">Planifiez votre séjour</h2>
        <p class="text-lg mb-8">Prêt à réserver votre séjour dans notre Riad de charme ? Consultez nos disponibilités et tarifs.</p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <a href="/reservation" class="btn btn-primary">
            Demander une réservation
          </a>
          <a href="/chambres" class="btn btn-outline">
            Voir nos chambres
          </a>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Animation pour les éléments */
  .fade-in-up {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }
  
  .fade-in-up.visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Animation au défilement
    const animatedElements = document.querySelectorAll('.fade-in-up');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });
    
    animatedElements.forEach(el => {
      observer.observe(el);
    });
    
    // FAQ accordéon
    const faqToggles = document.querySelectorAll('.faq-toggle');
    
    faqToggles.forEach(toggle => {
      toggle.addEventListener('click', () => {
        const content = toggle.nextElementSibling;
        const arrow = toggle.querySelector('svg');
        
        // Fermer tous les autres éléments
        document.querySelectorAll('.faq-content').forEach(item => {
          if (item !== content) {
            item.classList.add('hidden');
          }
        });
        
        document.querySelectorAll('.faq-toggle svg').forEach(item => {
          if (item !== arrow) {
            item.classList.remove('rotate-180');
          }
        });
        
        // Basculer l'élément actuel
        content.classList.toggle('hidden');
        arrow.classList.toggle('rotate-180');
      });
    });
  });
</script>