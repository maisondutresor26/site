---
import Layout from '../layouts/Layout.astro';
import ReservationForm from '../components/ui/ReservationForm.astro';
import heroBgSrc from '../assets/reservation-hero-bg.jpg'
import { contactInfo } from '../constants';

const reservationSteps = [
  {
    number: 1,
    title: 'Demande',
    description: 'Remplissez le formulaire de demande avec vos dates et préférences.'
  },
  {
    number: 2,
    title: 'Confirmation',
    description: 'Nous vérifions la disponibilité et vous envoyons une confirmation dans les 24h.'
  },
  {
    number: 3,
    title: 'Acompte',
    description: 'Un acompte de 30% vous sera demandé pour garantir votre réservation.'
  },
  {
    number: 4,
    title: 'Séjour',
    description: 'Profitez de votre séjour au Riad ! Le solde sera réglé à votre arrivée.'
  }
];
---

<Layout 
  title="Réservations" 
  description="Réservez votre séjour au Riad Maison du Trésor à Marrakech. Disponibilités en temps réel et réservation simple, rapide et sécurisée."
>
  <!-- Hero section -->
  <section class="relative pt-32 pb-16 md:pt-40 md:pb-24 bg-black text-white">
    <div class="absolute inset-0 z-0">
      <img 
        src={heroBgSrc.src}
        alt="Calendrier" 
        class="w-full h-full object-cover opacity-50"
      />
    </div>
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
      <div class="max-w-3xl">
        <h1 class="text-4xl md:text-5xl font-serif mb-4">Réservation</h1>
        <p class="text-xl">Réservez votre séjour dans notre Riad de charme au cœur de Marrakech.</p>
      </div>
    </div>
  </section>
  
  <!-- Reservation steps -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-3xl font-serif mb-6 text-center">Comment réserver</h2>
        <p class="text-center mb-12 text-gray-700">
          Suivez ces étapes simples pour réserver votre séjour dans notre Riad de charme.
        </p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16">
          {reservationSteps.map(step => (
            <div class="text-center fade-in-up">
              <div class="w-12 h-12 rounded-full bg-ocre-500 text-white flex items-center justify-center mx-auto mb-4">
                <span class="text-xl font-bold">{step.number}</span>
              </div>
              <h3 class="text-xl font-medium mb-2">{step.title}</h3>
              <p class="text-gray-600">{step.description}</p>
            </div>
          ))}
        </div>
        
        <div class="bg-sable-50 rounded-lg p-8 shadow-md mb-12 fade-in-up">
          <h3 class="text-xl font-medium mb-4">Informations importantes</h3>
          <ul class="space-y-2">
            <li class="flex items-start">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-ocre-500 mt-0.5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
              </svg>
              <span>Check-in : à partir de 14h00 / Check-out : jusqu'à 12h00</span>
            </li>
            <li class="flex items-start">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-ocre-500 mt-0.5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
              </svg>
              <span>Un acompte de 30% est demandé pour confirmer la réservation</span>
            </li>
            <li class="flex items-start">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-ocre-500 mt-0.5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
              </svg>
              <span>Possibilité de paiement par carte bancaire, virement ou espèces</span>
            </li>
            <li class="flex items-start">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-ocre-500 mt-0.5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
              </svg>
              <span>Annulation gratuite jusqu'à 7 jours avant l'arrivée</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Reservation form -->
  <section class="py-16 bg-sable-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl mx-auto">
        <h2 class="text-3xl font-serif mb-6 text-center">Demande de réservation</h2>
        <p class="text-center mb-12 text-gray-700">
          Complétez ce formulaire pour vérifier la disponibilité et les tarifs pour vos dates souhaitées. Nous vous répondrons dans les 24 heures.
        </p>
        
        <ReservationForm />
        
        <div class="mt-12 text-center">
          <p class="text-gray-700">
            Vous préférez réserver par téléphone ? Appelez-nous au <a href={contactInfo[1].link} class="text-ocre-500 hover:text-ocre-600 font-medium">{contactInfo[1].content}</a>
          </p>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Policies section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl mx-auto">
        <h2 class="text-3xl font-serif mb-6 text-center">Conditions de réservation</h2>
        
        <div class="space-y-8">
          <div class="fade-in-up">
            <h3 class="text-xl font-medium mb-3">Politique d'annulation</h3>
            <ul class="space-y-2 list-disc pl-5 text-gray-700">
              <li>Annulation gratuite jusqu'à 7 jours avant la date d'arrivée</li>
              <li>Entre 7 jours et 48h avant l'arrivée : 50% de la première nuit sera facturé</li>
              <li>Moins de 48h avant l'arrivée : 100% de la première nuit sera facturé</li>
              <li>Non-présentation (no-show) : 100% du séjour sera facturé</li>
            </ul>
          </div>
          
          <div class="fade-in-up">
            <h3 class="text-xl font-medium mb-3">Politique concernant les enfants</h3>
            <p class="text-gray-700 mb-3">
              Les enfants de tous âges sont les bienvenus dans notre Riad. Nous proposons des lits d'appoint et des berceaux sur demande (selon disponibilité).
            </p>
            <ul class="space-y-2 list-disc pl-5 text-gray-700">
              <li>Enfants de 0 à 2 ans : séjour gratuit (berceau gratuit selon disponibilité)</li>
              <li>Enfants de 3 à 12 ans : 25€ par nuit pour un lit d'appoint</li>
              <li>Personnes de plus de 12 ans : 40€ par nuit pour un lit d'appoint</li>
            </ul>
          </div>
          
          <div class="fade-in-up">
            <h3 class="text-xl font-medium mb-3">Modalités de paiement</h3>
            <p class="text-gray-700 mb-3">
              Pour confirmer votre réservation, un acompte de 30% du montant total du séjour est demandé. Le solde sera à régler lors de votre arrivée au Riad.
            </p>
            <p class="text-gray-700">
              Moyens de paiement acceptés : cartes bancaires (Visa, Mastercard), virements bancaires, espèces.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Animation pour les éléments */
  .fade-in-up {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }
  
  .fade-in-up.visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Animation au défilement
    const animatedElements = document.querySelectorAll('.fade-in-up');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });
    
    animatedElements.forEach(el => {
      observer.observe(el);
    });
  });
</script>